{% extends "base.html" %}
{% block body %}
<div class="container">
    <div class="btn-group pull-right" role="group" aria-label="...">
      <a href="/reporteX" class="button btn btn-default ">Reporte X</a>
      <a href="/reporteZ" class="button btn btn-default ">Reporte Z</a>
      <a href="/print_today" class="button btn btn-default ">Reimprimir facturas de hoy</a>
    </div>

  <h1>Facturas</h1>
  <table class="table table-condensed">
    <thead>
      <tr>
        <th>#</th>
        <th>Cliente</th>
        <th>Monto</th>
        <th>Fecha</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
    {% for invoice in invoices %}
      <tr class="{{ 'warning' if invoice.invoice_id in printed }}">
        <th scope="row" > {{ invoice.invoice_id }}</th>
        <td>{{ invoice.customer_name}}</td>
        <td>{{ "${:,.2f}".format(invoice.total) }}</td>
        <td>{{ invoice.date }}</td>
        <td>
          <a
          class="btn btn-xs btn-primary"
          href="/info/{{ invoice.invoice_id }}">Detail</a>
        </td>
        <td>
          <a
            class="btn btn-xs btn-success print_button"
            data-id="{{ invoice.invoice_id }}">Imprimir</a>
        </td>
        <td>
          <a
            class="btn btn-xs btn-info nota_credito_button"
            data-id="{{ invoice.invoice_id }}"
            data-toggle="modal"
            data-target="#getFiscalIDDialog">Nota Cr√©dito</a>
        </td>
        <td>
          <a
            class="btn btn-xs btn-default test_invoice"
            data-invoice-id="{{ invoice.invoice_id }}">No fiscal</a>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

  <nav aria-label="Page Navigation">
    <ul class="pager">
      {% if page_context["page"] != 1 %}
        <li>
          <a href="/{{ page_context["page"] - 1 }}">Previous</a>
        </li>
      {% endif %}
      {% if page_context.has_more_page %}
        <li>
          <a href="{{ page_context["page"] + 1 }}">Next</a>
        </li>
      {% endif%}
    </ul>
  </nav>

  </div>

<div class="modal fade" id="pleaseWaitDialog" role="dialog">
<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <h4 class="modal-title">Please Wait....</h4>
    </div>
    <div class="modal-body">
    <div class="progress progress-success">
    <div class="bar progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 0%" data-percentage="100"></div>
    </div>
    </div>
  </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="getFiscalIDDialog" role="dialog">
<div class="modal-dialog">
  <div class="modal-content">

    <div class="modal-header">
      <a class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></a>
      <h4 class="modal-title">ID Fiscal</h4>
    </div>

    <div class="modal-body">
      <form class="form">
        <input type="hidden" name="invoice_id" id="invoice_id" />
        <fieldset class="form-group">
          <label class="control-label" label-for="fiscal_id">ID Fiscal</label>
          <input type="number" class="form-control" id="fiscal_id" name="fiscal_id" />
        </fieldset>
    </div>

    <div class="modal-footer">
      <button type='submit' class="btn btn-primary submit">Aceptar</button>
      </form>
    </div>

  </div>
</div>
</div>

{% endblock %}


    